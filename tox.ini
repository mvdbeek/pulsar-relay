[tox]
envlist = lint, type, py311
skipsdist = True

[testenv]
description = Base testenv (not directly used by py311 env)
deps =
    -rrequirements.txt
setenv =
    PYTHONPATH = {toxinidir}
commands =
    pytest {posargs}

[testenv:py311]
description = Run pytest under Python 3.11
basepython = python3.11
deps =
    -rrequirements.txt
setenv =
    PYTHONPATH = {toxinidir}
commands =
    pytest {posargs}

[testenv:lint]
description = Run code formatters / linters (ruff + black)
deps =
    -rrequirements.txt
commands =
    # ruff uses pyproject.toml configuration
    ruff check .
    # black will use pyproject.toml configuration; --diff is omitted to keep output concise
    black --check .

[testenv:type]
description = Run static type checks (mypy)
basepython = python3.11
deps =
    -rrequirements.txt
commands =
    # Run mypy over the package and tests
    mypy app tests
